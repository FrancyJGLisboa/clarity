# Specification Template

Use this structure when generating `.clarity/spec.md`. Fill every section; mark unknowns with `[TBD]` and assumptions with `[ASSUMPTION]`.

---

```markdown
# Specification: {Project Name}

> Generated by `/clarity` on {date}
> Status: DRAFT | REVIEWED | APPROVED

## 1. System Overview

**One-liner**: {what it does in one sentence}
**Primary user**: {who benefits}
**Project type**: Greenfield | Brownfield delta

### 1.1 Goals
- {Goal 1}
- {Goal 2}

### 1.2 Non-Goals (Explicit Exclusions)
- {What this system will NOT do}

---

## 2. Functional Requirements

| ID | Requirement | Priority | Notes |
|----|-------------|----------|-------|
| FR-001 | {Requirement} | MUST / SHOULD / COULD | {Notes} |
| FR-002 | {Requirement} | MUST / SHOULD / COULD | {Notes} |

### 2.1 Core Workflow
{Step-by-step description of the primary user flow}

### 2.2 Secondary Flows
{Other important user flows}

### 2.3 Edge Cases & Error Handling
| Condition | Expected Behavior |
|-----------|-------------------|
| {Edge case} | {What should happen} |

---

## 3. Non-Functional Requirements

| ID | Requirement | Target | Notes |
|----|-------------|--------|-------|
| NFR-001 | {e.g., Response time} | {e.g., < 200ms p95} | {Notes} |
| NFR-002 | {e.g., Availability} | {e.g., 99.9%} | {Notes} |

---

## 4. Data Model

### 4.1 Entities
{List key entities with their attributes and relationships}

### 4.2 Data Flow
{How data moves through the system}

---

## 5. API / Interface Contracts

### 5.1 Endpoints / Commands / UI Screens
{Define interfaces with inputs, outputs, and status codes / states}

---

## 6. Technical Constraints
- **Stack**: {languages, frameworks, infrastructure}
- **Dependencies**: {external services, APIs}
- **Compatibility**: {browsers, OS, versions}

---

## 7. Assumptions
{List every assumption made during spec generation, each tagged [ASSUMPTION]}

- [ASSUMPTION] {assumption 1}
- [ASSUMPTION] {assumption 2}

---

## 8. Open Questions
{Unresolved items that need user/stakeholder input}

- [ ] {question 1}
- [ ] {question 2}
```

---

## Brownfield Addendum

When the project is brownfield, add these sections after Section 1:

```markdown
## 1A. Current State

### Existing Architecture
{Brief description of current system architecture}

### Relevant Files / Modules
| File/Module | Purpose | Will Change? |
|-------------|---------|--------------|
| {path} | {what it does} | Yes / No |

---

## 1B. Delta Specification

### What Changes
{Precise description of behavioral changes}

### What Must NOT Change
{Existing behavior that must be preserved}

### Migration Requirements
{Data migration, backwards compatibility, feature flags}
```
