# Handoff Template

Use this structure for `.clarity/handoff.md` — a self-contained prompt for any AI coding agent.

---

```markdown
# Implementation Handoff: {Project Name}

> Generated by `/clarity` on {date}
> Spec: `.clarity/spec.md`

## ⚠️ IMPORTANT RULES FOR THE IMPLEMENTING AGENT

1. **Read `.clarity/spec.md` thoroughly** before writing any code.
2. **Do NOT read the `scenarios/` directory.** Those are holdout tests for independent evaluation.
3. Follow the implementation order below. Do not skip ahead.
4. Ask clarifying questions if any requirement is ambiguous — do not guess.

---

## Tech Stack

| Layer | Technology | Notes |
|-------|-----------|-------|
| {e.g., Language} | {e.g., Python 3.12} | {Notes} |
| {e.g., Framework} | {e.g., FastAPI} | {Notes} |
| {e.g., Database} | {e.g., PostgreSQL 16} | {Notes} |
| {e.g., Deployment} | {e.g., Docker on Render} | {Notes} |

---

## Implementation Order

Complete each step fully before moving to the next.

### Step 1: {Foundation}
- [ ] {task}
- [ ] {task}

### Step 2: {Core Feature}
- [ ] {task}
- [ ] {task}

### Step 3: {Secondary Features}
- [ ] {task}

### Step 4: {Polish & Error Handling}
- [ ] {task}

---

## Tests to Write

Write tests for these behaviors (derived from the spec, not from holdout scenarios):

| Test | Covers | Type |
|------|--------|------|
| {test description} | FR-XXX | Unit |
| {test description} | FR-XXX | Integration |
| {test description} | NFR-XXX | Performance |

---

## Definition of Done

All of the following must be true:

- [ ] All functional requirements from spec are implemented
- [ ] All tests pass
- [ ] No hardcoded secrets or credentials
- [ ] Error handling covers all edge cases listed in spec Section 2.3
- [ ] Code runs successfully in the specified deployment environment
- [ ] {Any project-specific criteria}

---

## Explicit Exclusions

Do NOT implement these (they are out of scope):

- {exclusion 1}
- {exclusion 2}

---

## Reference Files

- Specification: `.clarity/spec.md`
- Project context: `.clarity/context.md`
```

---

## Handoff Integrity Rules

When generating the handoff:

1. **NEVER reference `scenarios/`** — not even to say "don't read it". Use the generic warning above.
2. **NEVER copy scenario content** into the handoff.
3. **Tests to Write** must be derived from the SPEC, not from scenarios. They will overlap, but the derivation path matters.
4. **Implementation Order** should reflect dependency order, not spec section order.
5. The handoff must be **self-contained** — an agent with only the handoff + spec should be able to implement.
